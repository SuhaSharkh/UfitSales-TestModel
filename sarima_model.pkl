import streamlit as st
import joblib
import pandas as pd

# Load your SARIMA model
model = joblib.load('sarima_model.pkl')

def make_prediction(n_steps):
    # Forecasting with the SARIMA model
    forecast = model.get_forecast(steps=n_steps)
    predicted_values = forecast.predicted_mean
    return predicted_values

# Streamlit Layout
if __name__ == "__main__":
    st.title("Sales Forecasting App")

    # User input for forecasting
    date_input = st.date_input("Select a date for prediction:")
    n_steps = st.number_input("Number of months to forecast:", min_value=1, max_value=24, value=12)

    if st.button("Make Prediction"):
        # Prepare input data as needed for the model
        input_data = {'n_steps': n_steps}

        # Make prediction
        prediction = make_prediction(input_data['n_steps'])

        # Create a date range for the forecast
        forecast_dates = pd.date_range(start=date_input, periods=n_steps, freq='M')

        # Display the predictions
        st.write("Predicted Sales for the next months:")
        prediction_df = pd.DataFrame({'Date': forecast_dates, 'Predicted Sales': prediction})
        st.line_chart(prediction_df.set_index('Date'))

